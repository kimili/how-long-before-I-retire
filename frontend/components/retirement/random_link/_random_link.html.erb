<%
text ||= 'View a random retirement'
random_retirement_hash_id =
  if @retirement.present? && @retirement.persisted?
    Retirement.where.not(id: @retirement.id).random.hashid
  else
    Retirement.random.hashid
  end
%>

<p class="random-retirement">
  <%= link_to text, retirement_url(id: random_retirement_hash_id), rel: 'nofollow' %>
</p>
